<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Happy Birthday</title>
  <link rel="stylesheet" href="../css/jquery.fullPage.css">
  <link rel="stylesheet" href="../css/style.css">
</head>

<body>
  <div class="bgcolor">
    <!-- 23颗星星背景 -->
    <div class="stars-container">
      <div class="star star1"></div>
      <div class="star star2"></div>
      <div class="star star3"></div>
      <div class="star star4"></div>
      <div class="star star5"></div>
      <div class="star star6"></div>
      <div class="star star7"></div>
      <div class="star star8"></div>
      <div class="star star9"></div>
      <div class="star star10"></div>
      <div class="star star11"></div>
      <div class="star star12"></div>
      <div class="star star13"></div>
      <div class="star star14"></div>
      <div class="star star15"></div>
      <div class="star star16"></div>
      <div class="star star17"></div>
      <div class="star star18"></div>
      <div class="star star19"></div>
      <div class="star star20"></div>
      <div class="star star21"></div>
      <div class="star star22"></div>
      <div class="star star23"></div>
    </div>
    <div style="z-index:100;" id="dowebok">
      <!--第一屏-->
      <div class="section">
        <div class="ly-box01">
          <div class="ly-txt01">
            <p class="ly-stxt01">跟所有的烦恼说拜拜~</p>
            <p class="ly-stxt02">跟所有的快乐说嗨嗨~</p>
            <p class="ly-stxt03">亲爱的，亲爱的，生日快乐！</p>
            <p class="ly-stxt04">祝你幸福永远~</p>
            <p class="ly-stxt05">幸福永远~~</p>
          </div>
          <div class="ly-txt02">
            <p class="ly-stxt06">咪咪</p>
            <p class="ly-stxt07">没想到吧</p>
            <p class="ly-stxt08">我以这种方式给你过生日</p>
            <p class="ly-stxt09">嘿嘿</p>
            <p class="ly-stxt10">下拉还有哟</p>
          </div>
        </div>
      </div>

      <!--第二屏-->
      <div class="section">
        <div class="timeline"></div>
        <div class="timepoint11"></div>
        <div class="ly-box11">
          <div class="ly-txt11" style="width:100%;height:10%;left:10%">
            <img class="ly-img11" src="../img/HappyBirthday.png" style="width:100%;height:100%">
          </div>
          <div class="ly-txt12">

          </div>
          <div class="ly-imgbox11" style="height:80%">
            <img class="ly-img11" src="../img/zt.png" style="height:100%">
          </div>
        </div>
        <div class="ly-triangle11"></div>

        <div class="ly-box12">
          <div class="ly-txt13" style="width:100%;height:10%;left:10%">
            <img class="ly-img11" src="../img/HappyBirthday.png" style="width:100%;height:100%">
          </div>
          <div class="ly-txt14">
            <p>小寿星</p>
            <p>不对，你是大寿星！</p>
            <p>祝你事事如意</p>
            <p>祝你岁岁安康</p>
            <p>也祝你年年有我(*/ω＼*)</p>
          </div>
          <div class="ly-imgbox11" style="height:50%">
            <img class="ly-img11" src="../img/timg.png" style="height:100%">
          </div>
        </div>
        <div class="ly-triangle12"></div>

      </div>

      <!--第三屏-->

      <div class="section">
        <div class="timeline"></div>
        <div class="timepoint21"></div>
        <div class="ly-box21">
          <div class="ly-txt21" style="width:100%;height:10%;left:10%">
            <img class="ly-img11" src="../img/HappyBirthday.png" style="width:200%;height:100%">
          </div>
          <div class="ly-txt22" style="left:20%;font-size: 45px">
            <p>祝</p>
            <p>你</p>
          </div>
          <div class="ly-imgbox21">
            <img class="ly-img21" src="../img/di2.png">
          </div>
        </div>
        <div class="ly-triangle21"></div>

        <div class="ly-box22">
          <div class="ly-txt23" style="width:100%;height:10%;left:10%">
            <img class="ly-img11" src="../img/HappyBirthday.png" style="width:200%;height:100%">
          </div>
          <div class="ly-txt24">
            <p>生辉花灿</p>
            <p>好日常安</p>
            <p>喜乐快意</p>
            <p>四季同乐</p>
          </div>
          <div class="ly-imgbox22">
            <img class="ly-img22" src="../img/di21.png">
          </div>
        </div>
        <div class="ly-triangle22"></div>

        <div class="ly-box23">
          <div class="ly-txt25" style="width:100%;height:10%;left:10%">
            <img class="ly-img11" src="../img/HappyBirthday.png" style="width:100%;height:100%">
          </div>
          <div class="ly-txt26">
            <p>有一丢丢斜藏</p>
            <p>但你那么聪明肯定发现了</p>
            <p>我的文笔？我一个个查的 嘻~</p>
          </div>
          <div class="ly-imgbox23" style="height: 70%">
            <img class="ly-img23" src="../img/di24.png" style="height: 100%">
          </div>
        </div>
        <div class="ly-triangle23"></div>
      </div>


      <div class="section">
        <div class="timeline"></div>
        <div class="timepoint11"></div>
        <div class="ly-box81">
          <div class="ly-txt11" style="width:100%;height:10%;left:10%">
            <img class="ly-img11" src="../img/HappyBirthday.png" style="width:200%;height:200%">
          </div>
          <div class="ly-txt82" style="top:8%">
            <p class="wwww1">来自万美灵的祝福：</p>
            <p class="wwww1">愿你以后的日子</p>
            <p class="wwww1">无病无灾，身体健康</p>
            <p class="wwww1">心想事成，好运连连</p>
            <p class="wwww1">(づ′▽`)づ 抱抱~</p>
            <p class="wwww1">(ᕑᗢᓫ∗)˒贴贴~</p>
            <p class="wwww1">( ˘ ³˘)♥亲亲~</p>
          </div>
          <div class="ly-imgbox81">
            <img class="ly-img81" src="../img/haha.jpg">
          </div>
        </div>
        <div class="ly-triangle11"></div>

        <div class="ly-box82">
          <div class="ly-txt13" style="width:100%;height:10%;left:10%">
            <img class="ly-img11" src="../img/HappyBirthday.png" style="width:100%;height:100%">
          </div>
          <div class="ly-txt84">
            <p>　∧,,,∧</p>
            <p> ᖗ ( ˶•˕•˶ )っ:¨·.·¨: ‧</p>
            <p>(￣∪￣￣￣)　・゜+.</p>
            <p>　　　　　　　 °。+ *´¨</p>
            <p>　　　　　　　.· ´¸.·*´¨ ¸.·*¨</p>
            <p>　　　　　　¸.·´ ¸.·'* ♡</p>
            <p>　　　　　　　小猫施法</p>
            <p>　　　　　　　　　　　彩蛋出现</p>
            <p><a href="./EasterEgg.html">♡♡♡小小彩蛋♡♡♡</a>  </p>
          </div>

        </div>
        <div class="ly-triangle82"></div>
      </div>

    </div>
    <!--试验-->
    <ul class="bg-bubbles">
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
    </ul>
  </div>
  <!-- 统一音频 -->
  <audio id="bg-music" src="../music/1.mp3" loop autoplay></audio>

  <script>
    // 音频管理系统
    const AudioPlayer = {
      audio: null,
      currentTime: 0,
      isPlaying: false,
      
      init: function() {
        this.audio = document.getElementById('bg-music');
        this.loadAudioState();
        this.setupEventListeners();
      },
      
      loadAudioState: function() {
        const savedTime = localStorage.getItem('audioCurrentTime');
        const savedPlaying = localStorage.getItem('audioPlaying');
        
        if (savedTime) {
          this.currentTime = parseFloat(savedTime);
        }
        
        this.audio.currentTime = this.currentTime;
        if (localStorage.getItem('audioPlaying') === 'true') {
          this.attemptAutoPlay();
        }
      },
      
      play: function() {
        this.audio.play().then(() => {
          this.isPlaying = true;
          localStorage.setItem('audioPlaying', 'true');
        }).catch(err => {
          console.log('播放失败:', err);
        });
      },
      
      pause: function() {
        this.audio.pause();
        this.isPlaying = false;
        this.saveState();
      },
      
      saveState: function() {
        localStorage.setItem('audioCurrentTime', this.audio.currentTime.toString());
        localStorage.setItem('audioPlaying', this.isPlaying.toString());
      },
      
      setupEventListeners: function() {
        // 页面卸载时保存状态
        window.addEventListener('beforeunload', () => {
          this.saveState();
        });
        
        // 页面可见性变化时控制播放
        document.addEventListener('visibilitychange', () => {
          if (document.hidden) {
            this.pause();
          } else {
            this.play();
          }
        });
        
        // 定期保存播放进度
        setInterval(() => {
          if (this.isPlaying) {
            this.saveState();
          }
        }, 1000);
        
        // 尝试立即自动播放
        this.attemptAutoPlay();
      },
      
      attemptAutoPlay: function() {
        // 多种方式尝试自动播放
        const playPromise = this.audio.play();
        
        if (playPromise !== undefined) {
          playPromise.then(() => {
            this.isPlaying = true;
            localStorage.setItem('audioPlaying', 'true');
            console.log('音频自动播放成功');
          }).catch(err => {
            console.log('自动播放失败，等待用户交互:', err);
            // 如果失败，监听任意用户交互后播放
            document.addEventListener('click', () => this.play(), { once: true });
            document.addEventListener('keydown', () => this.play(), { once: true });
            document.addEventListener('mousemove', () => this.play(), { once: true });
            document.addEventListener('scroll', () => this.play(), { once: true });
          });
        }
      }
    };

    // 页面加载完成后初始化
    window.addEventListener('DOMContentLoaded', function() {
      AudioPlayer.init();
      
      // 页面加载完成后立即尝试自动播放
      setTimeout(() => {
        AudioPlayer.attemptAutoPlay();
      }, 500);
    });
  </script>

    <script src="../js/jquery-1.8.3.min.js"></script>
    <script src="../js/jquery.fullPage.min.js"></script>
    <script src="../js/diy.js"></script>
</body>

</html>